# Anchor Documentation Coverage Analyzer

PHP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ PHPStan, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –Ω–∞–ª–∏—á–∏–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ Markdown —Ñ–∞–π–ª–∞—Ö.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∫–∞–∫–∏–µ –∫–ª–∞—Å—Å—ã, –º–µ—Ç–æ–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- üîç **–ü–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫**: –ù–∞—Ö–æ–¥–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–¥ –≤ Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- üìà **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º, JSON –∏ HTML —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML —Ñ–∞–π–ª—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- üéØ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –ø–æ–∫—Ä—ã—Ç–∏–∏
- üìã **Baseline –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, –∫–∞–∫ –≤ PHPStan

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url> anchor-docs
cd anchor-docs

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x bin/anchor-docs
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
php bin/anchor-docs analyze

# –ê–Ω–∞–ª–∏–∑ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º 90%
php bin/anchor-docs analyze --min-coverage=90

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–∞
php bin/anchor-docs analyze --format=html --output=coverage-report.html

# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
php bin/anchor-docs analyze --source=app/ --docs=documentation/

# –°–æ–∑–¥–∞–Ω–∏–µ baseline –¥–ª—è legacy –∫–æ–¥–∞
php bin/anchor-docs analyze --generate-baseline --baseline=docs-baseline.yml

# –ê–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º baseline
php bin/anchor-docs analyze --baseline=docs-baseline.yml --min-coverage=80
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `anchor-docs.yml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```yaml
source_paths:
  - "src/"
docs_paths:
  - "docs/"
exclude_paths:
  - "vendor/"
  - "tests/"
minimum_coverage: 80.0
baseline_file: "docs-baseline.yml"  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
output_format: "console"
```

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä –∫–ª–∞—Å—Å–∞ `UserService` –∏ –µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑:

```bash
php bin/anchor-docs analyze
```

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞–π–¥–µ—Ç:
- ‚úÖ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `getUserById()`, `createUser()`, `deleteUser()`, `getAllUsers()`
- ‚ùå –ù–µ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `updateUser()`, `getUsersByName()`
- üîó –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

```yaml
# GitHub Actions
- name: Check documentation coverage
  run: php bin/anchor-docs analyze --min-coverage=80
```

```bash
# GitLab CI
script:
  - php bin/anchor-docs analyze --min-coverage=80
```

## –§–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π
```
Documentation Coverage Report
==================================================

Overall Coverage: 66.7% (4/6 elements)
Minimum Required: 80.0%

Coverage by Type:
------------------------------
  Class       : 100.0% (1/1)
  Method      : 66.7% (4/6)

Undocumented Elements:
------------------------------
  src/Example/UserService.php
    Line 48: method updateUser
    Line 70: method getUsersByName

‚ùå FAILED
Issues: Coverage 66.7% is below minimum 80.0%
```

### HTML
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–π –≤–µ–±-–æ—Ç—á–µ—Ç —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

### JSON
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **CodeAnalyzer**: –ü–∞—Ä—Å–∏—Ç PHP –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é nikic/php-parser
- **DocumentationAnalyzer**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç Markdown —Å –ø–æ–º–æ—â—å—é league/commonmark
- **CoverageAnalysisService**: –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–¥ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- **ReportGenerator**: –°–æ–∑–¥–∞–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö

## Baseline (–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º)

–ö–∞–∫ –∏ –≤ PHPStan, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å baseline —Ñ–∞–π–ª –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–±–ª–µ–º:

```bash
# –°–æ–∑–¥–∞—Ç—å baseline –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
php bin/anchor-docs analyze --generate-baseline --baseline=docs-baseline.yml

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å baseline –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ
php bin/anchor-docs analyze --baseline=docs-baseline.yml

# –û–±–Ω–æ–≤–∏—Ç—å baseline (—É–¥–∞–ª–∏—Ç—å –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏)
php bin/anchor-docs analyze --update-baseline --baseline=docs-baseline.yml
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: [docs/baseline-guide.md](docs/baseline-guide.md)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ–¥–µ
php bin/anchor-docs analyze --source=src/ --docs=docs/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
vendor/bin/phpstan analyse src/

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
vendor/bin/phpunit
```